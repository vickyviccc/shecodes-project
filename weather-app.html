<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Homework Plus Week 5</title>

    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx"
      crossorigin="anonymous"
    />

    <link rel="stylesheet" href="src/styles.css" />

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <style>
      h1 {
        text-align: center;
        color: black;
      }
      .Vienna {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 20%;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 id="city">Vienna</h1>
      <img
        class="Vienna"
        src="https://images.ctfassets.net/hrltx12pl8hq/1DauLWsEwcnLf4NpCUMxxZ/85290d98239ff0bbee9803932249c444/weather-shutterstock_1716559711.jpg?fit=fill&w=480&h=320"
        alt=""
      />

      <br />
      <br />

      <h2></h2>

      <h3>Current temperature:</h3>
      <h4>
        <div id="temperature"></div>
      </h4>
      <br />
      <br />
      <br />

      <div class="row">
        <div class="col-3">Tuesday</div>
        <div class="col-3">Wednesday</div>
        <div class="col-3">Thursday</div>
        <div class="col-3">Friday</div>

        <div class="col-3">â›†</div>
        <div class="col-3">ðŸŒž</div>
        <div class="col-3">â›…</div>
        <div class="col-3">â˜‡</div>
      </div>
    </div>
    <br />
    <br />

    <form id="search-form">
      <input
        type="search"
        id="search-input-text"
        placeholder="Search city"
        autocomplete="off"
        autofocus="on"
      />
      <input type="submit" id="search-city" value="Search" />
    </form>

    <script>
      let now = new Date();

      let h2 = document.querySelector("h2");

      let days = [
        "Sunday",
        "Monday",
        "Tuesday",
        "Wednesday",
        "Thursday",
        "Friday",
        "Saturday",
      ];

      let day = days[now.getDay()];
      let hours = now.getHours();
      let minutes = now.getMinutes();

      h2.innerHTML = `${day}, ${hours}:${minutes}`;

      function searchCity(event) {
        event.preventDefault();
        let input = document.querySelector("#search-input-text");
        let h1 = document.querySelector("h1");
        h1.innerHTML = input.value;
        let apiKey = "8ceef6f0aff3ab761d0b608561cd4508";

        let city = document.querySelector("#search-input-text").value;
        let apiUrl =
          "https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric";

        axios.get(`${apiUrl}&appid=${apiKey}`).then(showTemperature);
      }
      function showTemperature(response) {
        console.log(response.data);
        let temperature = Math.round(response.data.main.temp);
        let h4 = document.querySelector("#temperature");
        h4.innerHTML = "It is `${temperature}`Â°C";
      }

      let form = document.querySelector("#search-form");

      form.addEventListener("submit", searchCity);
    </script>
  </body>
</html>
